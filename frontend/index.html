<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Factory Voice AI - Complete System</title>
    <link rel="stylesheet" href="/static/style.css">
</head>
<body>
    <div class="container">
        <!-- Header -->
        <header>
            <div class="header-content">
                <h1>üè≠ Factory Voice AI</h1>
                <p class="subtitle">Industrial STT/TTS System with Multi-Language Support</p>
            </div>
            <div class="header-status">
                <div class="status-badge" id="systemStatus">
                    <span class="status-dot"></span>
                    <span>Initializing...</span>
                </div>
            </div>
        </header>

        <div class="main-layout">
            <!-- Left Panel: Controls & Settings -->
            <aside class="sidebar">
                <!-- Connection Status -->
                <div class="panel">
                    <h3>üîå Connection</h3>
                    <div class="connection-status" id="connectionStatus">
                        <span class="connection-dot"></span>
                        <span>Disconnected</span>
                    </div>
                </div>

                <!-- Language Selection -->
                <div class="panel">
                    <h3>üåê Language</h3>
                    <div class="language-selector">
                        <button class="lang-btn active" data-lang="auto" id="langAuto">
                            <span>üåç</span> Auto
                        </button>
                        <button class="lang-btn" data-lang="en" id="langEn">
                            <span>üá∫üá∏</span> English
                        </button>
                        <button class="lang-btn" data-lang="ja" id="langJa">
                            <span>üáØüáµ</span> Êó•Êú¨Ë™û
                        </button>
                        <button class="lang-btn" data-lang="zh" id="langZh">
                            <span>üá®üá≥</span> ‰∏≠Êñá
                        </button>
                    </div>
                    <div class="detected-lang" id="detectedLang">
                        <small>Detected: <span id="detectedLangText">-</span></small>
                    </div>
                </div>

                <!-- Audio Controls -->
                <div class="panel">
                    <h3>üé§ Audio Controls</h3>
                    <div class="controls-grid">
                        <button id="startBtn" class="btn btn-primary btn-large">
                            <span class="btn-icon">üé§</span>
                            Start Listening
                        </button>
                        <button id="stopBtn" class="btn btn-secondary btn-large" disabled>
                            <span class="btn-icon">‚èπ</span>
                            Stop
                        </button>
                        <button id="saveRecordingBtn" class="btn btn-info" disabled>
                            <span class="btn-icon">üíæ</span>
                            Save Recording
                        </button>
                    </div>
                </div>

                <!-- Audio Level Meter -->
                <div class="panel">
                    <h3>üìä Audio Level</h3>
                    <div class="audio-meter-container">
                        <div class="audio-meter">
                            <div class="audio-meter-bar" id="audioMeterBar"></div>
                        </div>
                        <div class="audio-level-text" id="audioLevelText">-‚àû dB</div>
                    </div>
                </div>

                <!-- System Status Indicators -->
                <div class="panel">
                    <h3>‚öôÔ∏è System Status</h3>
                    <div class="status-grid">
                        <div class="status-item">
                            <span class="status-label">Audio Pipeline</span>
                            <span class="status-value" id="pipelineStatus">Ready</span>
                        </div>
                        <div class="status-item">
                            <span class="status-label">STT Engine</span>
                            <span class="status-value" id="sttStatus">Not Connected</span>
                        </div>
                        <div class="status-item">
                            <span class="status-label">TTS Engine</span>
                            <span class="status-value" id="ttsStatus">Not Connected</span>
                        </div>
                        <div class="status-item">
                            <span class="status-label">VAD</span>
                            <span class="status-value" id="vadStatus">Active</span>
                        </div>
                    </div>
                </div>

            </aside>

            <!-- Main Content: Conversation Area -->
            <main class="main-content">
                <!-- Visual Status Indicator -->
                <div class="visual-status" id="visualStatus">
                    <div class="status-circle" id="statusCircle">
                        <div class="status-icon" id="statusIcon">üé§</div>
                        <div class="status-text" id="statusText">Ready</div>
                    </div>
                    <div class="status-waves" id="statusWaves"></div>
                </div>

                <!-- Real-time Transcription -->
                <div class="transcription-panel">
                    <div class="transcription-header">
                        <h3>üìù Live Transcription</h3>
                        <div class="transcription-status" id="transcriptionStatus">
                            <span class="status-dot"></span>
                            <span>Waiting...</span>
                        </div>
                    </div>
                    <div class="transcription-content" id="transcriptionContent">
                        <p class="transcription-placeholder">Speak to see transcription here...</p>
                    </div>
                    <div class="transcription-interim" id="transcriptionInterim"></div>
                </div>

                <!-- TTS Output Panel -->
                <div class="tts-panel" id="ttsPanel" style="display: none;">
                    <div class="tts-header">
                        <h3>üîä System Response</h3>
                        <button class="btn-icon-only" id="stopTTSBtn" title="Stop speaking">
                            ‚èπ
                        </button>
                    </div>
                    <div class="tts-content" id="ttsContent">
                        <!-- TTS text will appear here -->
                    </div>
                    <div class="tts-visualizer" id="ttsVisualizer">
                        <div class="tts-wave"></div>
                    </div>
                </div>

                <!-- Processing Log -->
                <div class="log-panel collapsible">
                    <h3 class="collapsible-header" onclick="togglePanel(this)">
                        üìã Processing Log
                        <span class="toggle-icon">‚ñº</span>
                    </h3>
                    <div class="collapsible-content">
                        <div class="log-content" id="logContent">
                            <div class="log-entry">System initialized. Ready to process audio.</div>
                        </div>
                    </div>
                </div>
            </main>
        </div>
    </div>

    <!-- Help Modal -->
    <div class="modal" id="helpModal" style="display: none;">
        <div class="modal-content">
            <div class="modal-header">
                <h2>üìã Help & Troubleshooting</h2>
                <button class="btn-icon-only" onclick="closeModal('helpModal')">‚úï</button>
            </div>
            <div class="modal-body">
                <div id="helpContent">
                    <!-- Help content will be dynamically loaded -->
                </div>
            </div>
        </div>
    </div>

    <script src="/static/app.js"></script>
</body>
</html>
